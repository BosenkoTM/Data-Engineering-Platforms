# Система аналитики управления затратами

## Постановка задачи

Создание комплексной системы аналитики на основе данных опроса по управлению затратами для трех категорий пользователей с фокусом на формирование дашбордов в Yandex DataLens:

1. **Консультанты** - рекомендации клиентам на основе свежих данных
2. **HR и рекрутеры** - анализ рынка зарплат и ключевых компетенций
3. **Компания** - повышение качества консалтинга и получение конкурентного преимущества

## Технологический стек

- **База данных**: PostgreSQL 15+
- **Аналитика**: Yandex DataLens
- **Обработка данных**: Python (pandas, psycopg2)
- **Визуализация**: Jupyter Notebook
- **Среда разработки**: VS Code / Cursor

## Архитектура системы

```
CSV Data → ETL Pipeline → PostgreSQL → Data Marts → DataLens Dashboards
```

### Компоненты системы:

1. **Сырые данные** (`raw_data` schema)
   - Таблица `cost_survey_results` - исходные данные из CSV

2. **Аналитические витрины** (`analytics` schema)
   - `mart_consultant_metrics` - метрики для консультантов
   - `mart_hr_recruitment_metrics` - метрики для HR и рекрутеров  
   - `mart_company_strategy_metrics` - метрики для стратегического планирования
   - `mart_trend_analysis` - анализ трендов
   - `mart_benchmarking` - бенчмаркинг

3. **Дашборды DataLens с стрим чартами**
   - Дашборд для консультантов
   - Дашборд для HR и рекрутеров
   - Стратегический дашборд

## Шаги реализации

### 1. Подготовка данных
- [x] Анализ структуры CSV файла
- [x] Создание схемы базы данных
- [x] Загрузка данных в PostgreSQL

### 2. Создание витрин данных
- [x] Витрина для консультантов
- [x] Витрина для HR
- [x] Витрина для стратегического планирования

### 3. Настройка DataLens
- [ ] Подключение к PostgreSQL
- [ ] Создание датасетов на основе витрин
- [ ] Разработка дашбордов со стрим чартами

### 4. Документация
- [x] SQL скрипты с обоснованием
- [x] Описание формирования витрин

## Структура проекта

```
├── README.md                           # Документация проекта
├── cost_management_survey_results_10000.csv  # Исходные данные
├── data_analysis.ipynb                 # Анализ и загрузка данных
├── sql/
│   └── database_setup.sql             # Создание схем, таблиц и витрин
└── docs/
    └── datamarts_guide.md              # Руководство по формированию витрин
```

## Подключение к базе данных

```bash
Host: localhost
Port: 5432
Database: superstore
User: postgres
Password: post1616!
```

## DataLens Дашборды

Система включает три специализированных дашборда в Yandex DataLens с использованием стрим чартов:

### 1. Дашборд для консультантов
**Источник**: `analytics.mart_consultant_metrics`
**3 ключевых графика**:
- **Стрим чарт "Эффективность стратегий по департаментам"** - анализ отклонений затрат
- **Индикатор "Уровень риска по категориям затрат"** - цветовая индикация рисков
- **Таблица "Рекомендации для клиентов"** - детальные предложения с уровнем уверенности

### 2. Дашборд для HR и рекрутеров
**Источник**: `analytics.mart_hr_recruitment_metrics`
**3 ключевых графика**:
- **Стрим чарт "Зарплатные тренды по департаментам"** - динамика затрат на персонал
- **Индикатор "ROI от обучения сотрудников"** - эффективность инвестиций в развитие
- **Таблица "Компетенции и рекомендации по найму"** - требования к навыкам

### 3. Стратегический дашборд
**Источник**: `analytics.mart_company_strategy_metrics`
**3 ключевых графика**:
- **Стрим чарт "KPI эффективности управления затратами"** - ключевые показатели
- **Индикатор "Конкурентные преимущества"** - преимущества компании
- **Таблица "Стратегические приоритеты развития"** - направления развития

## Документация

Подробное описание формирования витрин и рекомендации по созданию дашбордов см. в [Руководстве по формированию аналитических витрин](docs/datamarts_guide.md).
