# Модуль 2. Базы данных и SQL

[Обратно в содержание курса :leftwards_arrow_with_hook:](https://github.com/BosenkoTM/Data-Engineering-Platforms/blob/master/readme.md)

В этом модуле мы познакомимся с базами данных и поймем их преимущество для работы с данными по сравнению с Excel/Google Sheets.

Мы потренируемся в написании SQL-запросов, установим базу данных и загрузим в нее данные, а затем будем использовать внешние инструменты для визуализации данных.

## 2.1 Введение

После первого модуля мы разобрались, что такое аналитика, как она работает, как она помогает бизнесу быть успешнее и какие важные навыки необходимы для специалистов, которые работают с данными.

Несмотря на то, что курс называется «Введение в инжиниринг данных» мы затронули разные области и инструменты. В последующих модулях мы будем непосредственно изучать, как эти инструменты работают и всё, что мы будем делать будет пересекаться с первым модулем.

Например, когда мы будем использовать базу данных, мы будем думать о том, как база данных может помочь эффективнее принимать бизнес-решения.

Второй модуль посвящен базам данных и SQL. БД являются основополагающими для любой аналитики. БД используются во всех организациях, чтоб собирать данных в структурированные формы.

Дальше мы будем учиться загружать и извлекать данные в БД, используя язык SQL.


## 2.2: Что такое базы данных и как они помогают при работе с данными

Самый главный навык для людей, которые занимаются аналитикой - это разобраться с SQL и базами данных. Большинство компаний на российском и иностранном рынке используют базы данных для того, чтобы хранить данные, подключать их к бизнес приложениям, делать аналитические решения и использовать в Machine learning/Data Science.

В интернете очень много информации про базы данных, которую сложно понять и применить на практике. Мы же сфокусируемся на базовых концепциях простым языком, чтобы у вас появились все необходимые инструменты для дальнейшего, более детального изучения.

Прежде всего базы данных - это программа для хранения данных. Такая же программа, как операционная система, которую мы устанавливаем на компьютеры или серверы, и её основная задача — это хранение данных.

Базы данных делятся на два типа: SQL (реляционные) и NoSQL (нереляционные). Мы будем говорить в основном про реляционные базы данных.

**Пример использования нереляционных баз данных** - сайт компании Abebooks, которая занимается продажей б/у книг. Весь инвентарь этого сайта, который включает в себя порядка 350 млн уникальных наименований хранится в NoSQL базе данных (DynamoDB). Ранее данные хранились в реляционной базе данных от Oracle, и были проблемы с производительностью, так как масштабировать такую базу было сложно и дорого. Миграция на NoSQL позволила решить технические проблемы и перестала сдерживать рост компании. Задача инженера данных в таком случае — «забирать» эти данные из NoSQL для анализа.

Вернемся к **реляционным базам данных**.
Данные в них хранятся в таблицах, которые можно группировать в схемы. Схема внутри базы данных – это логическое пространство для группировки таблиц. Например, схемы часто используют, чтобы разделить области внутри хранилища данных (например, на область `Staging` для сырых данных и `Business layer` для таблиц с бизнес-показателями).

Таблица в БД, как и в Excel, состоит из столбцов (columns) и строк (rows).

**Языки SQL.**
Есть четыре типа языков: для создания запросов (DML+DQL) и для управления БД (DDL+DCL). Как инженер данных вы будете писать запросы, изменять и вставлять данные, а также создавать таблицы, схемы и управлять доступом. Принципы работы SQL схожи во всех реляционных базах данных.

Для закрепления материала далее вы можете самостоятельно скачать и установить PostgreSQL. В следующей главе мы рассмотрим, как к нему подключаться.

**Часть 1 - Теория**: [Что такое база данных]().

**Часть 2 - Практический пример**: [Установка Postgres]().

### Дополнительные материалы для изучения

1.  [Введение в Базы Данных](https://stepik.org/course/551/) (Русский)
2.  [Хранилище данных vs Озеро Данных](https://habr.com/ru/post/485180/) (Русский)

### Самостоятельная работа 2.1

1.  Установить СУБД Postgres на свой компьютер. [Инструкции по установке Postgres](https://github.com/BosenkoTM/Data-Engineering-Platforms/blob/master/how-to/How%20to%20install%20PostgreSQL.md).

## 2.3: Подключение к Базам Данных и SQL

**Видео лекция. Часть 1 - Теория**: [Подключение к БД](https://youtu.be/nJsRJ5SytjI).

**Видео лекция. Часть 2 - Практический пример**: [Подключение к БД, загрузка данных в БД, SQL запросы](https://youtu.be/nJsRJ5SytjI?t=657)

### Дополнительные материалы для изучения

1.  [Интерактивный онлайн-курс по SQL СУБД PostgreSQL](https://learndb.ru/) (Русский)
2.  [Интерактивный SQL учебник с упражнениями](https://sql-ex.ru/) (Русский)
3.  [Основные функции SQL](https://khashtamov.com/ru/window-functions-sql/) (Русский)
4.  [Интерактивный тренажер по SQL](https://stepik.org/course/63054/) (Русский)
5.  [Лучшие вопросы средней сложности по SQL на собеседовании аналитика данных](https://habr.com/ru/company/dcmiran/blog/500360/) (Русский)

### Самостоятельная работа 2.2

1.  Установить SQL-клиент для подключения к базе данных. Рекомендуется DBeaver: [Инструкции по установке DBeaver](https://github.com/BosenkoTM/Data-Engineering-Platforms/blob/master/how-to/How%20to%20install%20DBeaver.md). Вы можете использовать любой другой клиент.
2.  Создать 3 таблицы и загрузить в них данные из файла [Superstore Excel](https://github.com/BosenkoTM/Data-Engineering-Platforms/blob/master/modules/Module01/Lab%201.1/Sample%20-%20Superstore.xls). Сохраните скрипты создания таблиц и загрузки данных в вашем репозитории GitHub для личного портфолио. Вы можете использовать готовый [пример SQL-файлов](https://github.com/BosenkoTM/Data-Engineering-Platforms/tree/master/modules/Module02).
3.  Напишите SQL-запросы, чтобы ответить на аналитические вопросы из [Модуля 1](https://github.com/BosenkoTM/Data-Engineering-Platforms/blob/master/modules/Module01/Lab%201.1/readme.md#%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D1%82%D0%B8%D0%BA%D0%B0-%D0%B2-excel). Сохраните скрипты с запросами в вашем репозитории GitHub.

## 2.4: Модели Данных

**Видео лекция. Часть 1 - Теория**: [Модели Данных](https://youtu.be/Jwefn9G2I_g)

**Видео лекция. Часть 2 - Практический пример**: [Создание модели данных в SQLdbm](https://youtu.be/Jwefn9G2I_g?t=1903)

### Дополнительные материалы для изучения

1.  Статья про Хранилище Данных [Антихрупкость архитектуры хранилищ данных](https://habr.com/ru/post/281553/)
2.  Статья про Data Vault [Основы Data Vault](https://habr.com/ru/post/502968/)

### Самостоятельная работа 2.3

1.  Нарисовать модель данных для файла [Superstore](https://github.com/BosenkoTM/Data-Engineering-Platforms/blob/master/modules/Module01/Lab%201.1/Sample%20-%20Superstore.xls):
    *   Концептуальную.
    *   Логическую.
    *   Физическую.
    Вы можете использовать бесплатную версию [SqlDBM](https://sqldbm.com/Home/) или любой другой инструмент для моделирования.

2.  Сгенерировать и скопировать `DDL` (Data Definition Language) из вашего инструмента и выполнить его в SQL-клиенте, чтобы создать таблицы по вашей модели.
3.  Написать `INSERT INTO` запросы, чтобы заполнить таблицы измерений (**Dimensions**) и таблицу фактов (**Sales Fact**). Сначала заполняются измерения, а затем таблица фактов, используя сгенерированные ID из измерений.

## 2.5: База данных в облаке

**Видео лекция. Часть 1 - Теория**: [БД в облаке](https://youtu.be/UzILBlOAQ9s)

**Видео лекция. Часть 2 - Практический пример**: [Создание Аналитической БД в облаке AWS](https://youtu.be/UzILBlOAQ9s?t=627)

### Дополнительные материалы для изучения

Мы посвятим целый модуль облачным вычислениям. Цель данного раздела — получить базовое представление о том, как настроить сетевое взаимодействие между серверами для безопасной коммуникации.

1.  Лекции на Coursera [Google IT Support Professional](https://www.coursera.org/professional-certificates/google-it-support) (English)
2.  [Шпаргалка системного администратора по сетевым инструментам Linux](https://habr.com/ru/company/ruvds/blog/417485/) (Русский)

### Самостоятельная работа 2.4

1.  Выполнить свои запросы из предыдущих упражнений, но уже на базе данных, развернутой в облаке. Не забудьте указать схему перед названием таблицы (например, `public.orders` или `stg.orders`).

## 2.6: Как донести данные до бизнес-пользователя

**Видео лекция. Часть 1 - Теория**: [Сервисы визуализации для базы данных](https://youtu.be/bqUtv1y3D7A)

**Видео лекция. Часть 2 - Практический пример**: [Пример подключения к облачным сервисам](https://youtu.be/bqUtv1y3D7A?t=825)

### Дополнительные материалы для изучения

Данная лекция знакомит вас с популярными сервисами для визуализации данных. По сути, мы с вами создаем BI-решение. Более детально мы рассмотрим BI в модуле 3.

1.  [Введение в Google Data Studio](https://analytics.google.com/analytics/academy/course/10) (English)
2.  [AWS QuickSight практика](https://docs.aws.amazon.com/quicksight/latest/user/getting-started.html) (English)
3.  [Пиратские метрики (AARRR)](https://vc.ru/trade/53154-piratskie-metriki-dlya-internet-magazina) (Русский)
4.  [Обзор книги «Lean Analytics»](https://gopractice.ru/lean_analytics/) (Русский)
